<div class="container">
  <div class="title1">
    BÁO CÁO IP ĐÃ BỊ CHẶN CLICK QUẢNG CÁO - TÀI KHOẢN <span
      class="adsId">{{sessionService.activeAdsAccountId}}</span>
  </div>
  <div class="inner">
    <div class="mat-elevation-z8 table-wrapper">
      <mat-table
        [dataSource]="dataSource | paginate: { itemsPerPage: pageLimit, currentPage: currentPageNumber, totalItems: totalItems }">

        <!-- Position Column -->
        <ng-container matColumnDef="order">
          <mat-header-cell *matHeaderCellDef> # </mat-header-cell>
          <mat-cell *matCellDef="let element; let i = index"> {{i+1}} </mat-cell>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="task">
          <mat-header-cell *matHeaderCellDef> Tác vụ </mat-header-cell>
          <mat-cell *matCellDef="let element">
            <button mat-icon-button color="accent" matTooltip="Nhấn để bỏ chặn" [disabled]="isProcessing"
              style="color: #44b543" (click)="openRemoveAutoBlockedIPConfirmDialog(element._id)">
              <mat-icon>lock_open</mat-icon>
            </button>
          </mat-cell>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="ip">
          <mat-header-cell *matHeaderCellDef> IP </mat-header-cell>
          <mat-cell *matCellDef="let element">

            <a matTooltip="Nhấn vào để xem chi tiết" [routerLink]="['/bao-cao/chi-tiet-ip', element._id, router.url]"
              class="ip-detail-link" mat-button color="warn">
              {{element._id}}
            </a>

          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="isPrivateBrowsing">
          <mat-header-cell *matHeaderCellDef> Ẩn danh </mat-header-cell>
          <mat-cell *matCellDef="let element">
            <span *ngIf="element.isPrivateBrowsing === true" style="color: orange; font-weight: bold">
              <mat-icon style="margin-top: 5px">report_problem</mat-icon>Có
            </span>
            <span *ngIf="element.isPrivateBrowsing === false" style="color:silver">Không</span>
          </mat-cell>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="network">
          <mat-header-cell *matHeaderCellDef> Mạng </mat-header-cell>
          <mat-cell *matCellDef="let element">{{(element.network | uppercase) || 'Unknown'}}</mat-cell>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="blockingOver">
          <mat-header-cell *matHeaderCellDef> Đã chặn trên </mat-header-cell>
          <mat-cell *matCellDef="let element">
            <span style="color: crimson; font-weight: bold; margin-right: 5px">{{element.numberOfCampaigns}}</span>
            chiến
            dịch
            <button mat-raised-button color="accent" class="view-campaign-button"
              (click)="showCampaignListDialog(element.campaigns)">Xem
              tất cả</button></mat-cell>
        </ng-container>

        <ng-container matColumnDef="keyword">
          <mat-header-cell *matHeaderCellDef> Từ khóa </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.keyword || ''}}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="campaignType">
          <mat-header-cell *matHeaderCellDef> Chiến dịch </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.campaignType || ''}}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="matchType">
          <mat-header-cell *matHeaderCellDef> Đối sánh </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.matchType || ''}}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="page">
          <mat-header-cell *matHeaderCellDef> Trang </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.page || ''}}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="position">
          <mat-header-cell *matHeaderCellDef> Vị trí </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.position || ''}}
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>
    </div>

    <div class="pagination-buttons" fxLayout="row" fxLayout.xs="column" *ngIf="pageTotal !== 1">
      <p *ngIf="pageTotal > 0">Trang <span [(ngModel)]="currentPageNumber"
          ngDefaultControl>{{currentPageNumber === 0 || currentPageNumber === undefined ? 1 : currentPageNumber}}</span>
        trong tổng
        {{pageTotal}} trang</p>
      <p *ngIf="pageTotal === 0">Chưa có ghi nhận nào.</p>
      <pagination-controls (pageChange)="changePage($event); currentPageNumber = $event" previousLabel="Trước"
        nextLabel="Sau" fxFlex fxLayoutAlign="end start" *ngIf="pageTotal > 0"></pagination-controls>
    </div>

  </div>

</div>