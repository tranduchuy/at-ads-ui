<div class="container">

  <div class="title1">
    LỊCH SỬ IP TRUY CẬP
  </div>

  <div class="main-inner">
    <div class="inner">
      <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="15px">
        <div class="left" fxFlex="20">
          <img src="https://www.mncplay.id/wp-content/uploads/2016/08/blank-profile.png" alt="" class="avatar">
          <p style="color: #039be5; font-weight: bold">IP: {{ip}}</p>
        </div>

        <div class="right">
          <mat-table
            [dataSource]="history | paginate: { itemsPerPage: pageLimit, currentPage: currentPageNumber, totalItems: totalItems }"
            class="mat-elevation-z8">

            <ng-container matColumnDef="adwords">
              <mat-header-cell *matHeaderCellDef></mat-header-cell>
              <mat-cell *matCellDef="let element">
                <span class="adwords-badge">GOOGLE ADS</span>
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="accessTime">
              <mat-header-cell *matHeaderCellDef>Truy cập</mat-header-cell>
              <mat-cell *matCellDef="let element">

                <mat-icon *ngIf="element.isSpam" style="margin-right: 10px; color: crimson"
                  matTooltip="Đã chặn và không bị tính tiền">verified_user</mat-icon>

                <mat-icon *ngIf="!element.isSpam" style="margin-right: 10px; color: gold"
                  matTooltip="Click chuột quảng cáo bị tính tiền">monetization_on</mat-icon>

                {{element.createdAt | date: 'HH:mm dd/MM/yyyy'}}
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="device">
              <mat-header-cell *matHeaderCellDef>Thiết bị</mat-header-cell>
              <mat-cell *matCellDef="let element; let i = index">
                <!-- <span *ngIf="i % 2 === 0">
                      <mat-icon color="accent">smartphone</mat-icon> Điện thoại
                    </span>
                    <span *ngIf="i % 2 !== 0">
                      <mat-icon color="accent">laptop_chromebook</mat-icon> Máy tính
                    </span>
                    <span *ngIf="false">
                      <mat-icon color="accent">tablet_mac
                      </mat-icon> Máy tính bảng
                    </span> -->
                <span *ngIf="element.device === undefined">Không xác định</span>
                <span *ngIf="element.device !== undefined">{{element.device?.vendor}}</span>
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="os">
              <mat-header-cell *matHeaderCellDef>Hệ điều hành</mat-header-cell>
              <mat-cell *matCellDef="let element">
                <img *ngIf="element.os?.name === 'Windows'"
                  src="https://1000logos.net/wp-content/uploads/2017/06/Windows-Logo.png" alt="" class="icon">
                <img *ngIf="element.os?.name === 'iOS'"
                  src="https://fairphone.cdn.shoprenter.hu/custom/fairphone/image/data/brand%20k%C3%A9pek/PNGPIX-COM-Apple-Grey-Logo-PNG-Transparent-500x576.png?lastmod=1534242773.1525780115"
                  alt="" class="icon">
                <img *ngIf="element.os?.name === 'Android'"
                  src="data:image/png;base64,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"
                  alt="" class="icon">
                <img *ngIf="element.os?.name === 'Mac OS'"
                  src="https://banner2.kisspng.com/20180415/vae/kisspng-finder-computer-icons-apple-logo-5ad351903f2c75.5613029815237984162588.jpg"
                  alt="" class="icon">
                <img *ngIf="element.os?.name === 'Linux'"
                  src="https://1000logos.net/wp-content/uploads/2017/03/LINUX-LOGO.png" alt="" class="icon">
                {{element.os?.name + ' ' + element.os?.version}}
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="browser">
              <mat-header-cell *matHeaderCellDef>Trình duyệt</mat-header-cell>
              <mat-cell *matCellDef="let element">
                <img *ngIf="element.browser?.name === 'Firefox'"
                  src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/67/Firefox_Logo%2C_2017.svg/1024px-Firefox_Logo%2C_2017.svg.png"
                  alt="" class="icon">
                <img *ngIf="element.browser?.name === 'Chrome'"
                  src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Google_Chrome_icon_%28September_2014%29.svg/1200px-Google_Chrome_icon_%28September_2014%29.svg.png"
                  alt="" class="icon">
                <img *ngIf="element.browser?.name === 'Safari'"
                  src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Safari_browser_logo.svg/1200px-Safari_browser_logo.svg.png"
                  alt="" class="icon">
                <img *ngIf="element.browser?.name === 'IE'"
                  src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Internet_Explorer_10%2B11_logo.svg/1200px-Internet_Explorer_10%2B11_logo.svg.png"
                  alt="" class="icon">
                <img *ngIf="element.browser?.name === 'Cốc Cốc'"
                  src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/C%E1%BB%91c_C%E1%BB%91c_logo.svg/1024px-C%E1%BB%91c_C%E1%BB%91c_logo.svg.png"
                  alt="" class="icon">
                <img *ngIf="element.browser?.name === 'Opera'"
                  src="https://cdn.freebiesupply.com/logos/large/2x/opera-2-logo-png-transparent.png" alt=""
                  class="icon">
                <img *ngIf="element.browser?.name === 'Tor'"
                  src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/i/2d904534-a747-4e77-b01c-a7a77fe8adb7/d7t716u-49fc2695-680d-4264-b8c0-510f85dd2ebf.png/v1/fill/w_894,h_894,strp/tor_logo_by_stanchenko_d7t716u-pre.png"
                  alt="" class="icon">
                {{element.browser?.name + ' ' + element.browser?.version}}
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="keyword">
              <mat-header-cell *matHeaderCellDef>Từ khóa</mat-header-cell>
              <mat-cell *matCellDef="let element"></mat-cell>
            </ng-container>

            <ng-container matColumnDef="website">
              <mat-header-cell *matHeaderCellDef>Trang truy cập</mat-header-cell>
              <mat-cell *matCellDef="let element">
                <a href="{{element.href}}" target="_blank"><span style="text-decoration: underline">Link tại
                    đây</span></a>
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="location">
              <mat-header-cell *matHeaderCellDef>Tại (địa điểm)</mat-header-cell>
              <mat-cell *matCellDef="let element">{{element.location?.city}}</mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="historyColumns; sticky: true"></mat-header-row>
            <mat-row *matRowDef="let row; columns: historyColumns"></mat-row>
          </mat-table>
        </div>
      </div>

      <div fxLayout="row" fxLayoutGap="15px" *ngIf="pageTotal !== 1">
        <div fxFlex="20"></div>
        <div class="pagination-buttons" fxLayout="row" fxLayout.xs="column">
          <div fxFlex="70">
            <p *ngIf="pageTotal > 0">Trang <span [(ngModel)]="currentPageNumber"
                ngDefaultControl>{{currentPageNumber === undefined ? 1 : currentPageNumber}}</span> trong tổng
              {{pageTotal}} trang</p>
            <p *ngIf="pageTotal === 0">Chưa có ghi nhận nào.</p>
          </div>
          <pagination-controls (pageChange)="changePage($event); currentPageNumber = $event" previousLabel="Trước"
            nextLabel="Sau" fxFlex fxLayoutAlign="end start" *ngIf="pageTotal > 0"></pagination-controls>
        </div>
      </div>

      <div class="bottom">
        <div class="last-access-notification" fxLayout="row" fxLayoutGap="12px">
          <p class="last-history-icon">
            <mat-icon color="accent">calendar_today</mat-icon>
          </p>
          <p class="title">
            Ngày ghi nhận cuối
            <br>
            <span style="color: gray" *ngFor="let item of lastHistory">
              {{item.createdAt | date: 'HH:mm dd/MM/yyyy'}}
            </span>
          </p>
        </div>
        <div class="access-location" fxLayout="row" fxLayoutGap="12px">
          <p class="last-history-icon">
            <mat-icon color="accent">location_on</mat-icon>
          </p>
          <p class="title">
            Vị trí truy cập
            <br>
            <span style="color: gray" *ngFor="let item of lastHistory">
              {{item.location?.city}}
            </span>
          </p>
        </div>
        <div class="last-access-device" fxLayout="row" fxLayoutGap="12px">
          <div class="last-history-icon">
            <mat-icon color="accent">speaker_phone</mat-icon>
          </div>
          <div class="title">
            Thiết bị truy cập cuối
            <div style="color: gray" *ngFor="let item of lastHistory">
              <span *ngIf="item.device === undefined">Không xác định</span>
              <span *ngIf="item.device !== undefined">{{item.device?.vendor}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>