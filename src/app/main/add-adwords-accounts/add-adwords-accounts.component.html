<div class="container">
  <div class="title">
    KẾT NỐI TÀI KHOẢN GOOGLE ADS CỦA BẠN
  </div>
  <div class="inner">
    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="30px" fxLayoutGap.xs="10px">
      <div gdArea="connect-button" class="connect-button">
        <h5><strong><span class="step">1</span> KẾT NỐI NHANH BẰNG GMAIL</strong></h5>
        <p style="text-align: justify"> Sử dụng tài khoản Gmail quản lý Google Ads, bấm kết nối nhanh để hoàn tất
          quá
          trình kết nối</p>
        <div class="loginWithGoogle">

          <button mat-raised-button (click)="showAccountListByEmail()" [disabled]="isProcessing || disableAllControls"
            *ngIf="!isAccountListShown" class="connect-by-email-button">
            <img src="https://cdn4.iconfinder.com/data/icons/free-colorful-icons/360/gmail.png" alt=""
              style="margin-right: 8px">Kết nối nhanh
            bằng
            Gmail</button>

          <button mat-raised-button (click)="isAccountListShown = false; selectedAccount = ''"
            [disabled]="isProcessing || disableAllControls" *ngIf="isAccountListShown"
            class="disconnect-by-email-button">
            <img src="https://cdn4.iconfinder.com/data/icons/free-colorful-icons/360/gmail.png" alt="">Hủy kết nối nhanh
            bằng Gmail</button>

        </div>
      </div>

      <div gdArea="input-side" class="input-side">

        <h5><strong><span class="step">2</span> KẾT NỐI THÔNG QUA MÃ GOOGLE ADS ID</strong></h5>
        <p style="text-align: justify"><strong>Bước 1: </strong> Đăng nhập <b><a
            href="https://ads.google.com/intl/vi_VN/home/" target="_blank">Awords.google.com</a></b>, ID tài
          khoản Google Ads của bạn sẽ nằm ở góc phải trên cùng. <span style="color: deeppink; font-weight: bold">VD: 552-999-5152</span>
          là
          ID
          tài khoản Google Ads của bạn</p>

        <form [formGroup]="form" novalidate>
          <div fxLayout="row">
            <app-input-text [formControlName]="'adWordId'" [title]="'Google Ads ID'"
              [placeholder]="'Ví dụ: 5456445193 hoặc 545-644-5193'" [pristine]="true"
              [errors]="getMessageErrors('adWordId')" (keypress)="onPressId($event.keyCode)"
              [isDisabled]="isProcessing || disableAllControls">
            </app-input-text>
            <button mat-raised-button color="accent" class="submit-button" aria-label="Kết nối"
              (click)="onClickBtnSubmit()" [disabled]="isProcessing || disableAllControls">
              <mat-icon matSuffix class="add_box" style="font-size: 20px">wifi</mat-icon>
              Kết nối
            </button>
          </div>
        </form>

      </div>
    </div>

    <div class="limit-account-notify" *ngIf="isLimitAccountNotificationShown && !isProcessing">
      <div class="limit-account-notify-content">
        Số lần kết nối tài khoản Google Ads của bạn đã hết. Vui lòng nâng cấp thêm <a routerLink="/nang-cap-vip">tại
          đây</a>
      </div>
    </div>

    <div class="ads-account-list" *ngIf="isAccountListShown && !isProcessing">

      <div class="ads-account-list-title" fxLayout="row" fxLayoutAlgin="center center">
        <img src="../../../assets/icons/gg-ads.png" alt="">
        <span>VUI
          LÒNG LỰA CHỌN TÀI
          KHOẢN
          GOOGLE ADS CỦA BẠN</span>
      </div>

      <mat-form-field>
        <mat-icon matPrefix style="font-size: 20px; color: rgba(0,0,0,0.6);">search</mat-icon>
        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Tìm kiếm">
      </mat-form-field>

      <div class="ads-account-list-wrapper">

        <mat-table [dataSource]="dataSource" class="mat-elevation-z8">

          <ng-container matColumnDef="order">
            <mat-header-cell *matHeaderCellDef> # </mat-header-cell>
            <mat-cell *matCellDef="let element; let i = index" [class.disabled-cell]="!element.availableToConnect">
              {{i + 1}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="adsId">
            <mat-header-cell *matHeaderCellDef>Google Ads ID </mat-header-cell>
            <mat-cell *matCellDef="let element" [class.disabled-cell]="!element.availableToConnect">
              <b>{{element.googleAdId}}</b>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef> Tên tài khoản </mat-header-cell>
            <mat-cell *matCellDef="let element" [class.disabled-cell]="!element.availableToConnect">
              {{element.name || 'Chưa có'}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="selection">
            <mat-header-cell *matHeaderCellDef> Chọn tại đây </mat-header-cell>
            <mat-cell *matCellDef="let element" [class.disabled-cell]="!element.availableToConnect">

              <mat-radio-button value="{element.googleAdId, adsName: element.name}" *ngIf="!element.availableToConnect"
                matTooltip="{{element.reason}}" disabled></mat-radio-button>

              <mat-radio-button [value]="{googleAdId: element.googleAdId, adsName: element.name}"
                *ngIf="element.availableToConnect" (change)="selectAccount($event)"></mat-radio-button>

            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="adsAccountColumns; sticky: true"></mat-header-row>
          <mat-row *matRowDef="let row; columns: adsAccountColumns;"></mat-row>
        </mat-table>

      </div>

      <p class="div-connect-account-button">
        <button mat-raised-button color="accent" [disabled]="!selectedAccount || isProcessing"
          (click)="connectAccountByEmail()" style="height: 45px">
          <mat-icon>wifi</mat-icon> Kết nối tài khoản
        </button>
      </p>
    </div>

    <div gdArea="content" *ngIf="isConnected" class="instruction-steps">
      <h5><strong><span class="step">3</span> CHẤP NHẬN YÊU CẦU KẾT NỐI</strong></h5>
      <p class="instruction-step"><strong>Bước 1: </strong> Đăng nhập vào tài khoản Google Ads của bạn tại trang <b><a
            href="https://ads.google.com/intl/vi_VN/home/" target="_blank">Adwords.google.com</a></b> và nhấn vào biểu tượng ở
        menu
        bên
        trái </p>
      <p class="text-center"><img src="/assets/images/adwords-caidat-b1-moi.jpg?v=1" class="instruction-image1"></p>
      <p class="instruction-step"><strong>Bước 2: </strong> Nhấn vào <span class="step-highline"> NGƯỜI QUẢN LÝ
        </span> và chọn
        <span class="step-highline">CHẤP NHẬN</span> (nếu bạn
        không thấy nút Người Quản Lý, vui lòng chờ khoảng 5 phút)</p>
      <p class="text-center">
        <img src="../../../assets/images/connect-ads-account-step2.PNG" class="instruction-image">
      </p>
      <p class="instruction-step"><strong>Bước 3: </strong>Một thông báo hiện ra, bạn chọn
        <span class="step-highline">CẤP QUYỀN TRUY CẬP</span></p>
      <p class="text-center">
        <img src="../../../assets/images/connect-ads-account-step3.PNG" class="instruction-image">
      </p>
      <p class="text-center" style="padding-top: 20px">
        <button mat-raised-button [disabled]="isProcessing" aria-label="TÔI ĐÃ HOÀN TẤT KẾT NỐI"
          [disabled]="isProcessing" (click)="completeAccountConnection()"
          style="background-color: #44b543; color: white">
          <mat-icon matSuffix class="done_outline" style="font-size: 20px">check</mat-icon>
          TÔI ĐÃ HOÀN TẤT KẾT NỐI
        </button>

      </p>
      <!-- <div gdArea="content">
            <h4><strong><span class="step">[2]</span>  Vui lòng đồng ý yêu cầu kết nối</strong></h4>
            <p><strong>Bước 1: </strong> Đăng nhập <a href="https://ads.google.com/intl/vi_VN/home/" target="_blank">adwords.google.com</a>, ID tài
              khoản adwords của bạn sẽ nằm ở góc phải trên cùng. <span style="color: deeppink;">VD: 552-999-5152</span> là ID
              tài khoản Adwords của bạn</p>
          </div> -->
    </div>
  </div>