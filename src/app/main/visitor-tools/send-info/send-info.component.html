<div class="container">

  <div class="main-title" fxLayout="row">
    <div class="parent-title">CÔNG CỤ KHÁCH HÀNG</div>
    <mat-icon>arrow_forward_ios</mat-icon>
    <div class="subtitle">CẤU HÌNH GỬI THÔNG TIN TƯ VẤN - WEBSITE
      <span class="selected-website">
        {{(websiteCtrl.value.name || '') | uppercase}}
      </span>
    </div>
  </div>

  <div class="inner">

    <div class="no-website-notify" *ngIf="hasWebsite === false">
      Không tìm thấy website nào.
    </div>

    <div *ngIf="hasWebsite === true">
      <mat-form-field class="website-selection">
        <mat-label>Lựa chọn website</mat-label>
        <mat-select [formControl]="websiteCtrl" #singleSelect (selectionChange)="selectWebsite()"
          [disabled]="isProcessing === true">
          <mat-option>
            <ngx-mat-select-search [formControl]="websiteFilterCtrl" [placeholderLabel]="'Tìm kiếm'"
              [noEntriesFoundLabel]="'Không tìm thấy website nào'"></ngx-mat-select-search>
          </mat-option>
          <mat-option *ngFor="let website of filteredWebsites | async" [value]="website">
            {{website.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div class="popup-config">
        <div fxLayout="row" fxLayoutGap="50px">
          <div class="tabs" fxFlex="50">
            <mat-tab-group mat-stretch-tabs class="example-stretched-tabs mat-elevation-z4">
              <mat-tab label="1. Nội dung popup">
                <div class="tab-content popup-style">
                  <form [formGroup]="popupStyleForm" (ngSubmit)="submitPopupStyleForm()">
                    <div class="theme-color-selection">
                      <mat-label style="color: gray">Màu sắc chủ đề</mat-label>
                      <div class="form-control">
                        <color-circle (onChangeComplete)="selectColorCircle($event)"></color-circle>
                      </div>
                    </div>
                    <div class="background-image-selection">
                      <p class="background-image-selection-title">
                        Thông tin hỗ trợ viên
                      </p>
                      <div class="supporter-details" fxLayout="row" fxLayoutGap="15px">
                        <mat-form-field class="example-full-width" fxFlex="65">
                          <input matInput placeholder="Họ và tên" formControlName="supporterName"
                            (input)="changePopupStyleFormControlValue($event.target.value, 'supporterName')">
                        </mat-form-field>
                        <mat-form-field class="example-full-width" fxFlex="35">
                          <input matInput placeholder="Chuyên môn" formControlName="supporterMajor">
                        </mat-form-field>
                      </div>
                      <mat-label style="color: gray; font-size: 12px">Ảnh đại diện</mat-label>
                      <div class="form-control">
                        <mat-grid-list cols="4" rowHeight="100px" gutterSize="10px">
                          <mat-grid-tile *ngFor="let img of images" [colspan]="img.cols" [rowspan]="img.rows">
                            <img src="{{img.url}}" alt="" (click)="selectSupporterAvatar(img.url)">
                          </mat-grid-tile>
                        </mat-grid-list>
                      </div>
                    </div>
                  </form>
                </div>
              </mat-tab>
              <mat-tab label="2. Cài đặt hiển thị" [disabled]="true">
                <div class="tab-content popup-display">
                  Chúng tôi đang xây dựng chức năng này.
                </div>
              </mat-tab>
              <mat-tab label="3. Nội dung thành công" [disabled]="true">
                <div class="tab-content popup-done">
                  Chúng tôi đang xây dựng chức năng này.
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>

          <div class="popup-example" fxFlex="50">
            <div class="browser" fxLayout="column">
              <div class="website-domain">{{websiteCtrl.value.name}}</div>
              <div class="popup">
                <div class="header">
                  <span>x</span>
                </div>
                <div class="content" fxLayout="row">
                  <div class="info" fxFlex="60">
                    <div class="title" [style.color]="popupStyleForm.controls['themeColor'].value">Trợ giúp qua điện
                      thoại
                    </div>
                    <div class="notice">Vui lòng nhập họ tên và số điện thoại của bạn, chúng tôi sẽ gọi lại bạn ngay!
                    </div>
                    <div class="input">Họ và tên</div>
                    <div class="input">Số điện thoại</div>
                    <p class="button" [style.background]="popupStyleForm.controls['themeColor'].value">Gửi yêu cầu</p>
                  </div>
                  <div class="background-img" fxFlex="40">
                    <img src="{{popupStyleForm.controls['supporterAvatar'].value}}" alt="">
                    <div class="name">{{popupStyleForm.controls['supporterName'].value || ''}}</div>
                    <div class="major">{{popupStyleForm.controls['supporterMajor'].value || ''}}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

        <div class="submit-area">
          <button mat-raised-button color="accent" (click)="submitAllForms()">
            <mat-icon>check</mat-icon>
            <span>LƯU CẤU HÌNH</span>
          </button>
        </div>

      </div>
    </div>
  </div>

</div>